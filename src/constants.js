/**
 * @file src/constants.js
 * @description –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (Single Source of Truth).
 * –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ UI-—à–∞–±–ª–æ–Ω—ã.
 * @module Constants
 * @version 2.1.0 (Renamed Estimate -> Calculation)
 */

// =============================================================================
// 1. –ö–õ–Æ–ß–ò –ë–ê–ó–´ –î–ê–ù–ù–´–• (DATABASE KEYS)
// =============================================================================
export const DB_KEYS = Object.freeze({
  // --- –ß–µ—Ä–Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã (Rough Work) ---
  STROBE_CONCRETE: "price_strobe_concrete",
  STROBE_BRICK: "price_strobe_brick",
  STROBE_GAS: "price_strobe_gasblock",

  DRILL_CONCRETE: "price_drill_concrete",
  DRILL_BRICK: "price_drill_brick",
  DRILL_GAS: "price_drill_gasblock",

  CABLE: "price_cable",
  BOX_INSTALL: "price_box_install",
  BOX_ASSEMBLY: "price_box_assembly",

  // --- –ß–∏—Å—Ç–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã (Finish Work) ---
  SOCKET_INSTALL: "price_socket_install",
  SHIELD_MODULE: "price_shield_module",

  // --- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã ---
  MAT_FACTOR: "material_factor", // % –Ω–∞ —á–µ—Ä–Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (—Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏)

  // --- –ó–∞—Ä–ø–ª–∞—Ç—ã ---
  STAFF_PERCENT: "percent_staff",
});

// =============================================================================
// 2. –¶–ï–ù–´ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ (FALLBACK PRICING)
// =============================================================================
export const PRICING = Object.freeze({
  rough: {
    strobeConcrete: 1750,
    strobeBrick: 1100,
    strobeGas: 800,
    drillConcrete: 1500,
    drillBrick: 1000,
    drillGas: 800,
  },
  common: {
    cable: 400,
    boxInstall: 600,
    boxAssembly: 3000,
    socketInstall: 1000,
    shieldModule: 1750,
    matFactor: 0.4, // 40% –æ—Ç —Ä–∞–±–æ—Ç—ã
    staffPercent: 0.8,
  },
});

// =============================================================================
// 3. –ë–ò–ó–ù–ï–°-–ü–†–ê–í–ò–õ–ê (ESTIMATE RULES)
// =============================================================================
export const ESTIMATE_RULES = Object.freeze({
  cablePerSqm: 6.5,
  pointsPerSqm: 0.8,
  strobeFactor: 0.9,
  minShieldModules: 12,
  modulesPerRoom: 2,
  boxesPerRoom: 1.5,
});

// =============================================================================
// 4. –†–û–õ–ò –ò –°–¢–ê–¢–£–°–´
// =============================================================================
export const ROLES = Object.freeze({
  ADMIN: "admin",
  MANAGER: "manager",
  CLIENT: "client",
});

export const ORDER_STATUS = Object.freeze({
  NEW: "new",
  DISCUSS: "discuss",
  WORK: "work",
  DONE: "done",
  CANCEL: "cancel",
});

export const MESSAGES = {
  // ... (–æ—Å—Ç–∞–≤—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è UserHandler –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

  // üëá –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø: –¢–ï–ö–°–¢–´ –î–õ–Ø –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê
  ADMIN: {
    // --- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ---
    ACCESS_DENIED:
      "‚õî **–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω.**\n–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞.",
    ONLY_OWNER_ACCESS:
      "‚õî **–û—Ç–∫–∞–∑–∞–Ω–æ –≤ –¥–æ—Å—Ç—É–ø–µ.**\n–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –í–ª–∞–¥–µ–ª—å—Ü—É (Owner).",

    // --- –ú–µ–Ω—é ---
    PANEL_WELCOME:
      "üë®‚Äçüíº **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ProElectric**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –º–µ–Ω—é –Ω–∏–∂–µ:",

    // --- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ---
    STATS_LOADING:
      "‚è≥ **–°–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏...**\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –∏–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.",
    STATS_ERROR:
      "‚ö†Ô∏è **–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞.**\n–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞.",

    statsReport: (totalUsers, newOrders, revenue, totalChecks) =>
      `üìä **–û—Ç—á–µ—Ç –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–∏–∑–Ω–µ—Å–∞**\n\n` +
      `üë• **–ê—É–¥–∏—Ç–æ—Ä–∏—è:**\n` +
      `‚Ä¢ –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: **${totalUsers}**\n\n` +
      `üí∞ **–§–∏–Ω–∞–Ω—Å—ã (–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª):**\n` +
      `‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏: **${newOrders}**\n` +
      `‚Ä¢ –û–∂–∏–¥–∞–µ–º–∞—è –≤—ã—Ä—É—á–∫–∞: **${revenue} ‚Ç∏**\n\n` +
      `üìâ **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**\n` +
      `‚Ä¢ –í—Å–µ–≥–æ —Ä–∞—Å—á–µ—Ç–æ–≤ —Å–º–µ—Ç—ã: **${totalChecks}**\n` +
      `\n_üïí –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–æ: ${new Date().toLocaleTimeString()}_`,

    // --- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ ---
    ROLE_FORMAT_ERROR:
      "‚ö†Ô∏è **–û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞**\n\n" +
      "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç:\n`/setrole ID_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø –†–û–õ–¨`\n\n" +
      "–ü—Ä–∏–º–µ—Ä:\n`/setrole 123456789 manager`\n\n" +
      "–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏: `admin`, `manager`, `user`",

    roleUpdateSuccess: (name, id, role) =>
      `‚úÖ **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã**\n\n` +
      `üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: **${name}**\n` +
      `üÜî ID: \`${id}\`\n` +
      `üîë –ù–æ–≤–∞—è —Ä–æ–ª—å: **${role.toUpperCase()}**`,

    roleNotificationUser: (role) =>
      `üéâ **–ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–∞–≤!**\n` +
      `–í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Ä–æ–ª—å: **${role.toUpperCase()}**`,

    roleUpdateError: (err) => `‚ùå **–û—à–∏–±–∫–∞ —Å–º–µ–Ω—ã —Ä–æ–ª–∏:** ${err}`,

    // --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω ---
    PRICE_HELP: (keysList) =>
      `üõ† **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤**\n\n` +
      `–ö–æ–º–∞–Ω–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å —Ü–µ–Ω—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –±–æ—Ç–∞.\n\n` +
      `–°–∏–Ω—Ç–∞–∫—Å–∏—Å:\n\`/setprice –ö–õ–Æ–ß –¶–ï–ù–ê\`\n` +
      `–ü—Ä–∏–º–µ—Ä:\n\`/setprice price_cable 300\`\n\n` +
      `üîë **–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–ª—é—á–∏:**\n${keysList}`,

    priceUpdateSuccess: (key, value) =>
      `‚úÖ **–¢–∞—Ä–∏—Ñ –æ–±–Ω–æ–≤–ª–µ–Ω**\n` +
      `–ü–∞—Ä–∞–º–µ—Ç—Ä: \`${key}\`\n` +
      `–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: **${value}**`,

    priceUpdateError:
      "‚ùå **–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏.** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.",

    // --- –†–∞—Å—Å—ã–ª–∫–∞ ---
    BROADCAST_HELP:
      "‚ö†Ô∏è **–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞**\n" +
      "–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã.\n\n" +
      "–ü—Ä–∏–º–µ—Ä:\n`/broadcast –í–Ω–∏–º–∞–Ω–∏–µ! –°–∫–∏–¥–∫–∏ –¥–æ –∫–æ–Ω—Ü–∞ –º–µ—Å—è—Ü–∞.`",

    BROADCAST_START:
      "‚è≥ **–ó–∞–ø—É—Å–∫ –º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏...**\n–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.",

    broadcastHeader: (text) => `üì¢ **–ù–æ–≤–æ—Å—Ç–∏ ProElectric**\n\n${text}`,

    broadcastReport: (success, fail) =>
      `üì¢ **–†–∞—Å—Å—ã–ª–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞**\n\n` +
      `‚úÖ –£—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ: **${success}**\n` +
      `‚ùå –ù–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ (–±–ª–æ–∫/—É–¥–∞–ª–µ–Ω): **${fail}**`,

    // --- –ë—ç–∫–∞–ø ---
    BACKUP_ERROR: "‚ùå **–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏.**",
    BACKUP_FILENAME: (date) => `proelectric_settings_${date}.json`,
  },

  USER: {
    // --- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –ú–µ–Ω—é ---
    WELCOME: (name) =>
      `üëã **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, ${name}!**\n\n` +
      `‚ö° –Ø —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ **ProElectric**.\n` +
      `–ú–æ—è –∑–∞–¥–∞—á–∞ ‚Äî —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤–∞—à–µ –≤—Ä–µ–º—è –∏ —Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —ç–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–Ω—ã—Ö —Ä–∞–±–æ—Ç.\n\n` +
      `üëá –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –º–µ–Ω—é:`,

    UNKNOWN_COMMAND:
      "ü§ñ **–ö–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞.**\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.",
    RETURN_MAIN: "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.** –í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –Ω–∞—á–∞–ª–æ.",
    SESSION_EXPIRED:
      "‚ö†Ô∏è **–í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ –∏—Å—Ç–µ–∫–ª–æ.**\n–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞—Å—á–µ—Ç –∑–∞–Ω–æ–≤–æ.",

    // --- –ú–∞—Å—Ç–µ—Ä –†–∞—Å—á–µ—Ç–∞ (Wizard) ---
    WIZARD_STEP_1_AREA:
      "üìê **–®–∞–≥ 1 –∏–∑ 3: –ü–ª–æ—â–∞–¥—å –ø–æ–º–µ—â–µ–Ω–∏—è**\n\n" +
      "–ù–∞–ø–∏—à–∏—Ç–µ –æ–±—â—É—é –ø–ª–æ—â–∞–¥—å –ø–æ –ø–æ–ª—É –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –º–µ—Ç—Ä–∞—Ö.\n" +
      "–ü—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `45` –∏–ª–∏ `72.5`).",

    WIZARD_ERROR_AREA:
      "‚ö†Ô∏è **–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö**\n" +
      "–ü–ª–æ—â–∞–¥—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∏—Å–ª–æ–º –æ—Ç 1 –¥–æ 1000 –∫–≤.–º.\n" +
      "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑:",

    WIZARD_STEP_2_WALL:
      "üß± **–®–∞–≥ 2 –∏–∑ 3: –ú–∞—Ç–µ—Ä–∏–∞–ª —Å—Ç–µ–Ω**\n\n" +
      "–û—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∞ —Å—Ç–µ–Ω –∑–∞–≤–∏—Å–∏—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å —à—Ç—Ä–æ–±–ª–µ–Ω–∏—è.\n" +
      "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ:",

    WIZARD_STEP_3_ROOMS:
      "üö™ **–®–∞–≥ 3 –∏–∑ 3: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–Ω–∞—Ç**\n\n" +
      "–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∏–ª—ã—Ö –∫–æ–º–Ω–∞—Ç (–≤–∫–ª—é—á–∞—è –∫—É—Ö–Ω—é).\n" +
      "–ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `2`).",

    WIZARD_ERROR_ROOMS:
      "‚ö†Ô∏è **–û—à–∏–±–∫–∞.** –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∫–æ–º–Ω–∞—Ç (1-20).",

    CALCULATION_PROCESS:
      "‚è≥ **–í—ã–ø–æ–ª–Ω—è—é —Ä–∞—Å—á–µ—Ç —Å–º–µ—Ç—ã...**\n–ü—Ä–∏–º–µ–Ω—è—é –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏ –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã.",
    CALCULATION_ERROR: "‚ùå **–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞.** –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.",

    // --- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (Invoice) ---
    estimateResult: (area, wall, rooms, workCost, matCost, totalCost) =>
      `üìã **–ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–ê–Ø –°–ú–ï–¢–ê**\n` +
      `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n` +
      `üìê –ü–ª–æ—â–∞–¥—å: **${area} –º¬≤**\n` +
      `üß± –°—Ç–µ–Ω—ã: **${wall}**\n` +
      `üö™ –ö–æ–º–Ω–∞—Ç: **${rooms}**\n` +
      `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n` +
      `üë∑ –°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç: **${workCost} ‚Ç∏**\n` +
      `üì¶ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã (—á–µ—Ä–Ω–æ–≤—ã–µ): ~**${matCost} ‚Ç∏**\n` +
      `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n` +
      `üí∞ **–ò–¢–û–ì–û –ü–û–î –ö–õ–Æ–ß:** **${totalCost} ‚Ç∏**\n\n` +
      `_‚ö†Ô∏è –†–∞—Å—á–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π. –•–æ—Ç–∏—Ç–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É –∏ –≤—ã–∑–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∞?_`,

    SAVE_ORDER_SUCCESS: (id) =>
      `‚úÖ **–ó–∞—è–≤–∫–∞ ‚Ññ${id} —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!**\n\n` +
      `–ú–µ–Ω–µ–¥–∂–µ—Ä —É–∂–µ –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π.\n` +
      `–°–ø–∞—Å–∏–±–æ –∑–∞ –¥–æ–≤–µ—Ä–∏–µ –∫ ProElectric!`,

    SAVE_ORDER_ERROR: "‚ùå **–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.** –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",

    // --- –ê–¥–º–∏–Ω–∫–∞ (–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ) ---
    NEW_ORDER_ADMIN: (id, user, phone, total) =>
      `üÜï **–ù–û–í–´–ô –ó–ê–ö–ê–ó ‚Ññ${id}**\n` +
      `üë§ –ö–ª–∏–µ–Ω—Ç: ${user}\n` +
      `üìû –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n` +
      `üí∞ –°—É–º–º–∞: **${total} ‚Ç∏**`,

    // --- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ---
    NO_ORDERS: "üì≠ **–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞.**\n–í—ã –µ—â–µ –Ω–µ –¥–µ–ª–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–æ–≤.",
    MY_ORDERS_HEADER: "üìÇ **–í–∞—à–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã:**\n\n",

    // --- –ò–Ω—Ñ–æ –∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ---
    ABOUT_US:
      `‚ö° **–û –∫–æ–º–ø–∞–Ω–∏–∏ ProElectric**\n\n` +
      `–ú—ã –∑–∞–Ω–∏–º–∞–µ–º—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —ç–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–æ–º –≤ –ê–ª–º–∞—Ç—ã –±–æ–ª–µ–µ 5 –ª–µ—Ç.\n` +
      `‚úÖ –†–∞–±–æ—Ç–∞–µ–º —Å—Ç—Ä–æ–≥–æ –ø–æ –ü–£–≠ –∏ –°–ù–∏–ü\n` +
      `‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —à—Ç—Ä–æ–±–æ—Ä–µ–∑—ã —Å –ø—ã–ª–µ—Å–æ—Å–æ–º (–±–µ–∑ –ø—ã–ª–∏)\n` +
      `‚úÖ –î–∞–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –≥–∞—Ä–∞–Ω—Ç–∏—é 5 –ª–µ—Ç\n\n` +
      `üìç –û—Ñ–∏—Å: —É–ª. –ê–±–∞—è 150\nüìû +7 707 123 45 67`,

    CONTACT_PROMPT:
      "‚úçÔ∏è **–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å.**\n–ú–µ–Ω–µ–¥–∂–µ—Ä –æ—Ç–≤–µ—Ç–∏—Ç –≤–∞–º –≤ —ç—Ç–æ–º —á–∞—Ç–µ.",
    CONTACT_SENT: "‚úÖ **–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!** –ú—ã —Å–∫–æ—Ä–æ –æ—Ç–≤–µ—Ç–∏–º.",
    SUPPORT_MSG_ADMIN: (user, text) =>
      `üÜò **–í–û–ü–†–û–° –û–¢ –ö–õ–ò–ï–ù–¢–ê**\nüë§ ${user}\n\n"${text}"`,
  },
};

// =============================================================================
// 5. –¢–ï–ö–°–¢–´ –ö–ù–û–ü–û–ö
// =============================================================================
export const BUTTONS = Object.freeze({
  CALCULATOR: "üöÄ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å", // –ò–∫–æ–Ω–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥ server.js
  ORDERS: "üìÇ –ú–æ–∏ —Ä–∞—Å—á–µ—Ç—ã", // –¢–µ–∫—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥ server.js
  PRICE_LIST: "üí∞ –ü—Ä–∞–π—Å-–ª–∏—Å—Ç",
  CONTACTS: "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã",

  MANAGER_OBJECTS: "üë∑‚Äç‚ôÇÔ∏è –ú–æ–∏ –æ–±—ä–µ–∫—Ç—ã",
  MANAGER_CASH: "üíµ –ú–æ—è –ö–∞—Å—Å–∞",

  ADMIN_PANEL: "üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å",
  ADMIN_STATS: "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
  ADMIN_SETTINGS: "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω",
  ADMIN_STAFF: "üë• –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏",

  BACK: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", // –ò–∫–æ–Ω–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
  CANCEL: "‚ùå –û—Ç–º–µ–Ω–∞",

  // üëá –≠–¢–û–ì–û –ù–ï –•–í–ê–¢–ê–õ–û –î–õ–Ø –†–ê–ë–û–¢–´ UserHandler.js
  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ "–ì–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–æ–≤"
  common: ["üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é", "‚ùå –û—Ç–º–µ–Ω–∞", "/cancel", "üîô –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"],
});
// =============================================================================
// 6. –ì–ï–ù–ï–†–ê–¢–û–†–´ –ö–õ–ê–í–ò–ê–¢–£–†
// =============================================================================
// ... (–ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–¥ –≤ —Ñ–∞–π–ª–µ –æ—Å—Ç–∞–µ—Ç—Å—è)

export const KEYBOARDS = {
  // 1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–§—É–Ω–∫—Ü–∏—è!)
  MAIN_MENU: (role) => {
    const btns = [
      [{ text: BUTTONS.CALCULATOR }, { text: BUTTONS.ORDERS }],
      [{ text: BUTTONS.PRICE_LIST }, { text: BUTTONS.CONTACTS }],
    ];
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –¥–ª—è –ú–µ–Ω–µ–¥–∂–µ—Ä–∞/–ê–¥–º–∏–Ω–∞/–í–ª–∞–¥–µ–ª—å—Ü–∞
    if ([ROLES.MANAGER, ROLES.ADMIN, ROLES.OWNER].includes(role)) {
      btns.unshift([
        { text: BUTTONS.MANAGER_OBJECTS },
        { text: BUTTONS.MANAGER_CASH },
      ]);
    }
    // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ê–¥–º–∏–Ω–∞/–í–ª–∞–¥–µ–ª—å—Ü–∞
    if ([ROLES.ADMIN, ROLES.OWNER].includes(role)) {
      btns.unshift([{ text: BUTTONS.ADMIN_PANEL }]);
    }

    return {
      keyboard: btns,
      resize_keyboard: true,
    };
  },

  // 2. –í—ã–±–æ—Ä —Å—Ç–µ–Ω (Inline)
  WALL_TYPES: {
    inline_keyboard: [
      [{ text: "üß± –ì–∞–∑–æ–±–ª–æ–∫ / –ì–ö–õ", callback_data: "wall_gas" }],
      [{ text: "üß± –ö–∏—Ä–ø–∏—á", callback_data: "wall_brick" }],
      [{ text: "üèó –ë–µ—Ç–æ–Ω / –ú–æ–Ω–æ–ª–∏—Ç", callback_data: "wall_concrete" }],
    ],
  },

  // 3. –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã
  CANCEL_MENU: {
    keyboard: [[{ text: BUTTONS.CANCEL }]],
    resize_keyboard: true,
    one_time_keyboard: true,
  },

  // 4. –ú–µ–Ω—é –∞–¥–º–∏–Ω–∞
  ADMIN_MENU: {
    keyboard: [
      [{ text: BUTTONS.ADMIN_STATS }, { text: BUTTONS.ADMIN_SETTINGS }],
      [{ text: BUTTONS.ADMIN_STAFF }, { text: BUTTONS.BACK }],
    ],
    resize_keyboard: true,
  },

  // 5. üî• –î–û–ë–ê–í–õ–ï–ù–û: –î–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ (—ç—Ç–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ)
  ESTIMATE_ACTIONS: {
    inline_keyboard: [
      [
        {
          text: BUTTONS.ACTION_SAVE || "‚úÖ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞—è–≤–∫—É",
          callback_data: "action_save_order",
        },
      ],
      [
        {
          text: BUTTONS.ACTION_CONTACT || "üí¨ –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å",
          callback_data: "action_contact",
        },
      ],
    ],
  },
};

// =============================================================================
// 7. –®–ê–ë–õ–û–ù–´ –°–û–û–ë–©–ï–ù–ò–ô
// =============================================================================
const formatKZT = (val) =>
  new Intl.NumberFormat("ru-KZ", {
    style: "currency",
    currency: "KZT",
    maximumFractionDigits: 0,
  }).format(val);

export const TEXTS = {
  welcome: (name) =>
    `–°–∞–ª–∞–º, <b>${name}</b>! üëã\n` +
    `–Ø —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ <b>ProElectro</b>.\n` +
    `–Ø –ø–æ–º–æ–≥—É —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —ç–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–∞.\n\n` +
    `üëá –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:`,

  contacts: () =>
    `üìû <b>–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã:</b>\n\n` +
    `üë§ –ì–ª–∞–≤–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä: @yeeerniyaz\n` +
    `üì± –¢–µ–ª–µ—Ñ–æ–Ω: +7 (777) 123-45-67\n` +
    `üìç –ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω`,

  priceList: (dbPrices = {}) => {
    const getVal = (key, def) => parseFloat(dbPrices[key] || def);

    const p = {
      strobeC: getVal(DB_KEYS.STROBE_CONCRETE, PRICING.rough.strobeConcrete),
      strobeB: getVal(DB_KEYS.STROBE_BRICK, PRICING.rough.strobeBrick),
      cable: getVal(DB_KEYS.CABLE, PRICING.common.cable),
      drillC: getVal(DB_KEYS.DRILL_CONCRETE, PRICING.rough.drillConcrete),
      box: getVal(DB_KEYS.BOX_INSTALL, PRICING.common.boxInstall),
      socket: getVal(DB_KEYS.SOCKET_INSTALL, PRICING.common.socketInstall),
      shield: getVal(DB_KEYS.SHIELD_MODULE, PRICING.common.shieldModule),
      pointTotal:
        getVal(DB_KEYS.DRILL_CONCRETE, 1500) +
        getVal(DB_KEYS.BOX_INSTALL, 600) +
        getVal(DB_KEYS.SOCKET_INSTALL, 1000),
    };

    return (
      `üìã <b>–û–§–ò–¶–ò–ê–õ–¨–ù–´–ô –ü–†–ê–ô–°-–õ–ò–°–¢ 2026</b>\n` +
      `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n` +
      `<b>üèó –ß–ï–†–ù–û–í–´–ï –†–ê–ë–û–¢–´:</b>\n` +
      `‚ñ´Ô∏è –®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (–ë–µ—Ç–æ–Ω): ${formatKZT(p.strobeC)}/–º\n` +
      `‚ñ´Ô∏è –®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (–ö–∏—Ä–ø–∏—á): ${formatKZT(p.strobeB)}/–º\n` +
      `‚ñ´Ô∏è –ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è: ${formatKZT(p.cable)}/–º\n` +
      `‚ñ´Ô∏è –í—ã—Å–≤–µ—Ä–ª–∏–≤–∞–Ω–∏–µ (–ë–µ—Ç–æ–Ω): ${formatKZT(p.drillC)}/—à—Ç\n` +
      `‚ñ´Ô∏è –í–º–∞–∑–∫–∞ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∞: ${formatKZT(p.box)}/—à—Ç\n\n` +
      `<b>‚ú® –ß–ò–°–¢–û–í–´–ï –†–ê–ë–û–¢–´:</b>\n` +
      `‚ñ´Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞: ${formatKZT(p.socket)}/—à—Ç\n` +
      `‚ñ´Ô∏è –°–±–æ—Ä–∫–∞ —â–∏—Ç–∞ (–º–æ–¥—É–ª—å): ${formatKZT(p.shield)}/—à—Ç\n\n` +
      `üí° <b>–¢–æ—á–∫–∞ "–ü–æ–¥ –∫–ª—é—á" (–ë–µ—Ç–æ–Ω):</b>\n` +
      `~ ${formatKZT(p.pointTotal)} / —à—Ç\n\n` +
      `<i>‚ùóÔ∏è –¶–µ–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.</i>`
    );
  },

  // üî• –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –®–ê–ë–õ–û–ù (–ë–ï–ó –°–õ–û–í–ê "–°–ú–ï–¢–ê")
  estimateResult: (orderId, est, wallType) => {
    const wallNames = {
      gas: "üß± –ì–∞–∑–æ–±–ª–æ–∫",
      brick: "üß± –ö–∏—Ä–ø–∏—á",
      concrete: "üèó –ë–µ—Ç–æ–Ω (–ú–æ–Ω–æ–ª–∏—Ç)",
    };

    return (
      `‚ö°Ô∏è <b>–ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ô –†–ê–°–ß–ï–¢ (–ó–∞–∫–∞–∑ #${orderId})</b>\n` +
      `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n` +
      `üè† <b>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—ä–µ–∫—Ç–∞:</b>\n` +
      `‚ñ´Ô∏è –ü–ª–æ—â–∞–¥—å: ${est.params.area} –º¬≤\n` +
      `‚ñ´Ô∏è –ö–æ–º–Ω–∞—Ç: ${est.params.rooms}\n` +
      `‚ñ´Ô∏è –°—Ç–µ–Ω—ã: ${wallNames[wallType] || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"}\n\n` +
      `<b>üìã –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç (–û–±—ä–µ–º):</b>\n` +
      `‚ñ´Ô∏è –≠–ª–µ–∫—Ç—Ä–æ—Ç–æ—á–∫–∏ (~${est.volume.points} —à—Ç): <b>${formatKZT(est.breakdown.points)}</b>\n` +
      `‚ñ´Ô∏è –®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (~${est.volume.strobe} –º): <b>${formatKZT(est.breakdown.strobe)}</b>\n` +
      `‚ñ´Ô∏è –ö–∞–±–µ–ª—å (~${est.volume.cable} –º): <b>${formatKZT(est.breakdown.cable)}</b>\n` +
      `‚ñ´Ô∏è –©–∏—Ç (~${est.volume.modules} –º–æ–¥): <b>${formatKZT(est.breakdown.shield)}</b>\n` +
      `‚ñ´Ô∏è –†–∞—Å–ø–∞–π–∫–∏ (~${est.volume.boxes} —à—Ç): <b>${formatKZT(est.breakdown.boxes)}</b>\n` +
      `----------------------------------\n` +
      `‚öí <b>–°–¢–û–ò–ú–û–°–¢–¨ –†–ê–ë–û–¢: ${formatKZT(est.total.work)}</b>\n\n` +
      `üì¶ <b>–ú–ê–¢–ï–†–ò–ê–õ–´ (–ß–µ—Ä–Ω–æ–≤—ã–µ):</b>\n` +
      `<i>–ö–∞–±–µ–ª—å, –≥–æ—Ñ—Ä–∞, –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∏, –≥–∏–ø—Å...</i>\n` +
      `–†–∞—Å—á–µ—Ç (+40%): <b>${formatKZT(est.total.material)}</b>\n` +
      `‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ‚ûñ\n` +
      `üèÅ <b>–ò–¢–û–ì–û –ü–û–î –ö–õ–Æ–ß: ${formatKZT(est.total.grandTotal)}</b>\n\n` +
      `<i>‚ö†Ô∏è –≠—Ç–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç. –¢–æ—á–Ω–∞—è —Å—É–º–º–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–º–µ—Ä–∞.</i>`
    );
  },
};
