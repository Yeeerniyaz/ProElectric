# Используем стабильную версию Node.js на легком образе
FROM node:20-slim

# Создаем рабочую директорию
WORKDIR /app

# Копируем манифесты зависимостей
COPY package*.json ./

# Устанавливаем только необходимые пакеты (без dev-зависимостей)
RUN npm ci --omit=dev

# Копируем остальной код
COPY . .

# Открываем порт для Healthcheck
EXPOSE 3000

# Запускаем приложение
CMD ["node", "index.js"]