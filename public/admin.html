<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProElectro | Enterprise CRM</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>

    <div id="login-screen" class="login-container">
        <div class="login-box">
            <h2>üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <form id="login-form">
                <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞" required>
                <button type="submit" class="btn primary full">–í–æ–π—Ç–∏</button>
            </form>
            <p id="login-error" class="error-msg"></p>
        </div>
    </div>

    <div id="app" class="app-container hidden">
        
        <aside class="sidebar">
            <div class="brand">
                ‚ö°Ô∏è <span>ProElectro</span>
            </div>
            <nav class="menu">
                <button class="menu-item active" data-tab="dashboard">
                    <i data-feather="pie-chart"></i> <span>–î–∞—à–±–æ—Ä–¥</span>
                </button>
                <button class="menu-item" data-tab="orders">
                    <i data-feather="layers"></i> <span>–ó–∞–∫–∞–∑—ã</span>
                </button>
                <button class="menu-item" data-tab="finance">
                    <i data-feather="dollar-sign"></i> <span>–§–∏–Ω–∞–Ω—Å—ã</span>
                </button>
                <button class="menu-item" data-tab="settings">
                    <i data-feather="sliders"></i> <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </nav>
            <div class="sidebar-footer">
                <button id="logout-btn" class="btn-text-danger">
                    <i data-feather="log-out"></i> –í—ã–π—Ç–∏
                </button>
            </div>
        </aside>

        <main class="main-content">
            
            <header class="top-bar">
                <h1 id="page-title">–û–±–∑–æ—Ä</h1>
                <div class="user-info">
                    <div id="loading-indicator" class="loader hidden"></div>
                    <span class="badge admin">Admin</span>
                    <span id="date-display" class="date-text"></span>
                </div>
            </header>

            <section id="tab-dashboard" class="tab-content active">
                <div class="kpi-grid">
                    <div class="card kpi-card">
                        <div class="kpi-icon blue"><i data-feather="activity"></i></div>
                        <div class="kpi-info">
                            <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ</h3>
                            <p id="kpi-active">-</p>
                        </div>
                    </div>
                    <div class="card kpi-card">
                        <div class="kpi-icon green"><i data-feather="check-circle"></i></div>
                        <div class="kpi-info">
                            <h3>–ó–∞–≤–µ—Ä—à–µ–Ω–æ</h3>
                            <p id="kpi-done">-</p>
                        </div>
                    </div>
                    <div class="card kpi-card">
                        <div class="kpi-icon orange"><i data-feather="briefcase"></i></div>
                        <div class="kpi-info">
                            <h3>–û–±–æ—Ä–æ—Ç</h3>
                            <p id="kpi-revenue">-</p>
                        </div>
                    </div>
                    <div class="card kpi-card">
                        <div class="kpi-icon purple"><i data-feather="trending-up"></i></div>
                        <div class="kpi-info">
                            <h3>–ü—Ä–∏–±—ã–ª—å</h3>
                            <p id="kpi-profit">-</p>
                        </div>
                    </div>
                </div>

                <div class="section-header">
                    <h2>üî• –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                </div>
                <div class="actions-grid">
                    <button class="btn primary" onclick="openModal('modal-create-order')">
                        <i data-feather="plus-circle"></i> –ù–æ–≤—ã–π –∑–∞–∫–∞–∑
                    </button>
                    <button class="btn secondary" onclick="app.refreshData()">
                        <i data-feather="refresh-cw"></i> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>
            </section>

            <section id="tab-orders" class="tab-content">
                <div class="filters-bar">
                    <div class="filters">
                        <button class="filter-btn active" onclick="app.loadOrders('all')">–í—Å–µ</button>
                        <button class="filter-btn" onclick="app.loadOrders('new')">–ù–æ–≤—ã–µ</button>
                        <button class="filter-btn" onclick="app.loadOrders('work')">–í —Ä–∞–±–æ—Ç–µ</button>
                        <button class="filter-btn" onclick="app.loadOrders('done')">–ê—Ä—Ö–∏–≤</button>
                    </div>
                    <button class="btn primary small" onclick="openModal('modal-create-order')">
                        <i data-feather="plus"></i>
                    </button>
                </div>
                
                <div class="card table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th width="5%">ID</th>
                                <th width="20%">–ö–ª–∏–µ–Ω—Ç</th>
                                <th width="15%">–°—Ç–∞—Ç—É—Å</th>
                                <th width="15%">–ú–∞—Å—Ç–µ—Ä</th>
                                <th width="15%">–§–∏–Ω–∞–Ω—Å—ã</th>
                                <th width="15%">–ü—Ä–æ—Ñ–∏—Ç</th>
                                <th width="15%" style="text-align: right;">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="orders-table-body"></tbody>
                    </table>
                </div>
            </section>

            <section id="tab-finance" class="tab-content">
                <div class="finance-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>üí∞ –ö–∞—Å—Å—ã</h3>
                            <button class="btn-icon small" onclick="app.loadFinance()"><i data-feather="refresh-cw"></i></button>
                        </div>
                        <div id="accounts-list" class="accounts-list"></div>
                    </div>
                    <div class="card">
                        <h3>üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
                        <div class="table-scroll">
                            <table class="data-table small">
                                <thead>
                                    <tr>
                                        <th>–î–∞—Ç–∞</th>
                                        <th>–°—á–µ—Ç</th>
                                        <th>–¢–∏–ø</th>
                                        <th>–°—É–º–º–∞</th>
                                        <th>–ò–Ω—Ñ–æ</th>
                                    </tr>
                                </thead>
                                <tbody id="transactions-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tab-settings" class="tab-content">
                <div class="card">
                    <h3>üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–Ω</h3>
                    <p class="hint">–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter.</p>
                    <div id="settings-grid" class="settings-grid"></div>
                </div>
            </section>

        </main>
    </div>

    <div id="modal-create-order" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑</h2>
                <button class="close-btn" onclick="closeModal('modal-create-order')"><i data-feather="x"></i></button>
            </div>
            <form id="create-order-form">
                <div class="form-group">
                    <label>–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞</label>
                    <input type="text" name="clientName" placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" required>
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" name="clientPhone" placeholder="+7 700 000 00 00" required>
                </div>
                <div class="row">
                    <div class="form-group">
                        <label>–ü–ª–æ—â–∞–¥—å (–º¬≤)</label>
                        <input type="number" name="area" placeholder="50" required>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–º–Ω–∞—Ç</label>
                        <input type="number" name="rooms" value="1" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>–¢–∏–ø —Å—Ç–µ–Ω</label>
                    <select name="wallType">
                        <option value="light">üß± –ì–∞–∑–æ–±–ª–æ–∫ / –ì–ö–õ</option>
                        <option value="brick">üß± –ö–∏—Ä–ø–∏—á</option>
                        <option value="concrete">üèó –ë–µ—Ç–æ–Ω / –ú–æ–Ω–æ–ª–∏—Ç</option>
                    </select>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn secondary" onclick="closeModal('modal-create-order')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn primary">–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-add-expense" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h2>
                <button class="close-btn" onclick="closeModal('modal-add-expense')"><i data-feather="x"></i></button>
            </div>
            <p id="expense-order-info" class="hint-box"></p>
            <form id="add-expense-form">
                <input type="hidden" id="expense-order-id" name="orderId">
                <div class="form-group">
                    <label>–°—É–º–º–∞ (‚Ç∏)</label>
                    <input type="number" name="amount" placeholder="0" required>
                </div>
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select name="category">
                        <option value="material">üîå –ú–∞—Ç–µ—Ä–∏–∞–ª (–î–æ–∫—É–ø–∫–∞)</option>
                        <option value="taxi">üöï –¢–∞–∫—Å–∏ / –î–æ—Å—Ç–∞–≤–∫–∞</option>
                        <option value="food">üçî –ü–∏—Ç–∞–Ω–∏–µ</option>
                        <option value="tools">üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</option>
                        <option value="other">üì¶ –ü—Ä–æ—á–µ–µ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                    <input type="text" name="comment" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∫–∞–±–µ–ª—å 3—Ö2.5">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn secondary" onclick="closeModal('modal-add-expense')">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn danger">–°–ø–∏—Å–∞—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script>feather.replace();</script>
</body>
</html>